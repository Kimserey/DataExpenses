<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:;base64,=">
    <title>London</title>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://rawgit.com/Kimserey/SimpleUI/master/dist/css/SimpleUI.css">
    <script src="https://code.highcharts.com/highcharts.js"></script>
</head>
<body>
    <script>
        function makeChart(endpoint, title, xAxis, yAxis, makeSeries) {
            $.getJSON('http://localhost:8083/' + endpoint, function (result) {
                $('<div class="chart-card" style="width:100%;height:400px;">').highcharts({
                    chart: {
                        type: 'spline',
                        zoomType: 'xy'
                    },
                    title: {
                        text: title
                    },
                    xAxis: {
                        title: {
                            text: xAxis
                        }
                    },
                    yAxis: {
                        title: {
                            text: yAxis
                        }
                    },
                    plotOptions: {
                        spline: {
                            marker: {
                                enabled: false
                            }
                        }
                    },
                    series: makeSeries(result)
                }).appendTo('body');
            });
        }


        makeChart('data', 'Supermarket - Approximation', 'Days', 'Total expense', function (result) {
            return result.map(function(dataset) {
                return [
                    { name: dataset.name, data: dataset.originals.map(function (d) { return d.y; }) },
                    { name: 'approx ' + dataset.name, data: dataset.estimates.map(function (d) { return d.y; }) }
                ];
            }).reduce(function(a, b) {
                return a.concat(b);
            }, []);
        });

    </script>
</body>
</html>